// vim: set filetype=jsonc
//
// coc.nvim Configuration file
// https://github.com/neoclide/coc.nvim/wiki/Using-the-configuration-file
{
  // https://github.com/neoclide/coc.nvim/wiki/Language-servers
  "languageserver": {
    // https://github.com/nametake/golangci-lint-langserver
    "golangci-lint-languageserver": {
      "command": "golangci-lint-langserver",
      "filetypes": ["go"],
      "initializationOptions": {
        "command": [
          "golangci-lint",
          "run",
          "--out-format",
          "json",
          "--enable",
          "asciicheck",
          "bidichk",
          "bodyclose",
          "contextcheck",
          "cyclop",
          "dupl",
          "durationcheck",
          "errorlint",
          "exhaustive",
          "exhaustivestruct",
          "exportloopref",
          "gocognit",
          "gosec",
          "makezero",
          "misspell",
          "nilerr",
          "nilnil",
          "prealloc",
          "promlinter",
          "thelper"
        ]
      }
    }
  },

  // Filetypes for which formatting triggers after saving.
  "coc.preferences.formatOnSaveFiletypes": [
    "json",
    "html",
    "javascript",
    "javascriptreact",
    "css",
    "scss",
    "terraform"
  ],

  // https://github.com/josa42/coc-go
  "go.goplsOptions": {
    // https://github.com/golang/tools/blob/master/gopls/doc/settings.md#experimentalworkspacemodule-bool
    "experimentalWorkspaceModule": true
  },

  // https://github.com/iamcco/coc-diagnostic
  "diagnostic-languageserver.filetypes": {
    "vim": "vint",
    "sh": "shellcheck",
    "dockerfile": "hadolint"
  },

  // Use tsserver only for .ts files.
  // https://github.com/neoclide/coc-tsserver/issues/135#issuecomment-609460607
  "tsserver.enableJavascript": false
}
